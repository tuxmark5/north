builtins
builtins_grammar
grammar

////////////////////////////////////////////////////////////////////////////////////////////////

rule s() {
  parse (r" \t\n"+, S1);
}

////////////////////////////////////////////////////////////////////////////////////////////////

rule op_plus() { parse (s?, "+"); }
rule op_star() { parse (s?, "*"); }

////////////////////////////////////////////////////////////////////////////////////////////////

rule_dyn expr();

#[part_of(expr, 100)]
rule expr_int() { parse (s?, r"0-9"+, B); }

#[part_of(expr, 90)]
rule expr_mult() { parse (expr!, op_star, expr); }

#[part_of(expr, 80)]
rule expr_add() { parse (expr!, op_plus, expr!); }

////////////////////////////////////////////////////////////////////////////////////////////////

rule main() {
  parse expr;
}

////////////////////////////////////////////////////////////////////////////////////////////////
